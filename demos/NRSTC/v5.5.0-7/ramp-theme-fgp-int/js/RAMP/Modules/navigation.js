/*! ramp-theme-fgp-int 26-06-2015 14:25:19 : v. 5.5.0-7 
 * 
 * RAMP GIS viewer - Groundhog; Sample of an implementation of RAMP with Intranet Theme 
 **/
define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","ramp/globalStorage","ramp/eventManager","esri/geometry/Point"],function(a,b,c,d,e,f){"use strict";function g(){function a(a){var b=[a.coords.longitude,a.coords.latitude],c="EPSG:"+k.extent.spatialReference.wkid,d=proj4("EPSG:4326",c),e=d.forward(b),g=new f(e[0],e[1],k.extent.spatialReference);k.centerAndZoom(g,12)}function c(){j&&j.getCurrentPosition(a)}i.on("navigation:panClick",function(a,c){b.publish(e.Navigation.PAN,{direction:c})}).on("navigation:zoomClick",function(a,c){var d="zoomIn"===c?1:-1;b.publish(e.Navigation.ZOOM_STEP,{level:d})}).on("navigation:zoomSliderChange",function(a,c){b.publish(e.Navigation.ZOOM,{level:c})}).on("navigation:fullExtentClick",function(){b.publish(e.Navigation.FULL_EXTENT)}).on("navigation:geoLocateClick",function(){c()})}function h(){function a(a){i.navigation("toggleTransition",a)}b.subscribe(e.Map.EXTENT_CHANGE,function(a){i.navigation("setSliderVal",a.lod.level)}),b.subscribe(e.Map.ZOOM_START,function(){a(!0)}),b.subscribe(e.Map.PAN_START,function(){a(!0)}),b.subscribe(e.Map.EXTENT_CHANGE,function(){a(!1)})}var i,j,k;return{init:function(a){k=RAMP.map,j=navigator.geolocation,i.navigation("setSliderVal",a),g(),h()},construct:function(){var a=c.mixin({},RAMP.config.navWidget,{locale:RAMP.locale});i=$("#"+RAMP.config.divNames.navigation).navigation(a)}}});