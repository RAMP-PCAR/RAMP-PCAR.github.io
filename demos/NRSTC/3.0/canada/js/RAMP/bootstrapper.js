/*! ramp-theme-canada 13-11-2014 09:59:09 : v. 3.0.1 
 * 
 * RAMP GIS viewer - Canada Goose; Sample of an implementation of RAMP with Canada.ca Theme 
 **/
require(["dojo/parser","dojo/on","dojo/topic","dojo/request/script","dojo/request/xhr","dojo/_base/array","ramp/map","ramp/basemapSelector","ramp/maptips","ramp/datagrid","ramp/navigation","ramp/filterManager","ramp/bookmarkLink","utils/url","ramp/featureHighlighter","ramp/ramp","ramp/globalStorage","ramp/gui","ramp/eventManager","ramp/advancedToolbar","ramp/theme","utils/util","utils/prototype!","utils/functionMangler!"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";function w(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.src=dojoConfig.fullPluginPath+a,b.appendChild(c)}function x(){c.subscribe(s.Map.ALL_LAYERS_LOADED,function(){v.subscribeAll([s.BasemapSelector.UI_COMPLETE,s.FilterManager.UI_COMPLETE],function(){m.subscribeAndUpdate()});var a=g.getMap().__LOD.level?g.getMap().__LOD.level:0;k.init(a),o.init(),i.init(),h.init(),l.init(),q.config.advancedToolbar.enabled&&t.init(),j.init(),u.tooltipster()}),g.init(),k.construct(),u.tooltipster()}v.checkConsole(),a.parse(),esri.config.defaults.io.corsDetection=!1;var y,z,A=$("html").attr("lang");"en"!==A&&"fr"!==A&&(A="en"),i18n.init({lng:A+"-CA",load:"current",fallbackLng:!1}),y="fr"===A?"config.fr.json":"config.en.json",z=e(y,{handleAs:"json"}),z.then(function(a){var b,d=$("li.map-toolbar-item #advanced-toggle").parent();q.config=a,q.config.advancedToolbar.enabled?d.removeClass("wb-invisible"):d.remove(),b=q.config.plugins,b&&f.map(b,function(a){w(a)}),m.updateConfig(window.location.pathname.split("/").last()),c.subscribe(s.GUI.UPDATE_COMPLETE,function(){x()}),r.load(null,null,function(){}),m.createUI(),p.loadStrings()},function(a){})});