/*! ramp-pcar 01-05-2015 14:07:43 : v. 5.4.0-2 
 * 
 * RAMP GIS viewer - Elk; Sample of an implementation of RAMP 
 **/
define(["ramp/ramp","utils/array","utils/dictionary","utils/util","utils/tmplHelper","dojo/text!./templates/feature_details_template.json"],function(a,b,c,d,e,f){"use strict";return{getGraphicOid:function(a){var b=a.getLayer().objectIdField;return a.attributes[b]},getFDataOid:function(a){return a.attributes[a.parent.idField]},getFDataForGraphic:function(a){var b,c,d=RAMP.data[a.getLayer().id];return d&&(b=d.index[this.getGraphicOid(a).toString()],void 0!==typeof b&&(c=d.features[b])),c},getConfigForFData:function(a){return b.find(RAMP.config.layers.wms.concat(RAMP.config.layers.feature),function(b){return b.id===a.parent.layerId})},getGraphicTextContent:function(a){var b=a.getLayer().ramp.config.templates.detail;tmpl.cache={},tmpl.templates=JSON.parse(e.stringifyTemplate(f));var c=this.getFDataForGraphic(a);if(c){var d=e.dataBuilder(c,a.getLayer().ramp.config);return tmpl(b,d)}return""},getFDataTextContent:function(a){var b=this.getConfigForFData(a),c=b.templates.detail;tmpl.cache={},tmpl.templates=JSON.parse(e.stringifyTemplate(f));var d=e.dataBuilder(a,b);return tmpl(c,d)},getGraphicTitle:function(a){var b=this.getFDataForGraphic(a);return b?b.attributes[a.getLayer().ramp.config.nameField]:""},getFDataTitle:function(a){return a.attributes[this.getConfigForFData(a).nameField]},findGraphic:function(a,c){var d=RAMP.layerRegistry[c];return b.find(d.graphics,function(b){return this.getGraphicOid(b)===a},this)}}});