<!DOCTYPE html>

<html>
<head>
  <title>tmplUtil.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="basemapSelector.html">
                basemapSelector.js
              </a>
            
              
              <a class="source" href="bookmarkLink.html">
                bookmarkLink.js
              </a>
            
              
              <a class="source" href="datagrid.html">
                datagrid.js
              </a>
            
              
              <a class="source" href="datagridClickHandler.html">
                datagridClickHandler.js
              </a>
            
              
              <a class="source" href="eventManager.html">
                eventManager.js
              </a>
            
              
              <a class="source" href="featureClickHandler.html">
                featureClickHandler.js
              </a>
            
              
              <a class="source" href="featureHighlighter.html">
                featureHighlighter.js
              </a>
            
              
              <a class="source" href="filterManager.html">
                filterManager.js
              </a>
            
              
              <a class="source" href="globalStorage.html">
                globalStorage.js
              </a>
            
              
              <a class="source" href="graphicExtension.html">
                graphicExtension.js
              </a>
            
              
              <a class="source" href="gui.html">
                gui.js
              </a>
            
              
              <a class="source" href="map.html">
                map.js
              </a>
            
              
              <a class="source" href="maptips.html">
                maptips.js
              </a>
            
              
              <a class="source" href="navigation.html">
                navigation.js
              </a>
            
              
              <a class="source" href="quickzoom.html">
                quickzoom.js
              </a>
            
              
              <a class="source" href="ramp.html">
                ramp.js
              </a>
            
              
              <a class="source" href="RAMP-starter.html">
                RAMP-starter.js
              </a>
            
              
              <a class="source" href="theme.html">
                theme.js
              </a>
            
              
              <a class="source" href="theme.html">
                theme.js
              </a>
            
              
              <a class="source" href="theme.html">
                theme.js
              </a>
            
              
              <a class="source" href="array.html">
                array.js
              </a>
            
              
              <a class="source" href="decorator.html">
                decorator.js
              </a>
            
              
              <a class="source" href="dictionary.html">
                dictionary.js
              </a>
            
              
              <a class="source" href="functionMangler.html">
                functionMangler.js
              </a>
            
              
              <a class="source" href="popupManager.html">
                popupManager.js
              </a>
            
              
              <a class="source" href="prototype.html">
                prototype.js
              </a>
            
              
              <a class="source" href="tmplHelper.html">
                tmplHelper.js
              </a>
            
              
              <a class="source" href="tmplUtil.html">
                tmplUtil.js
              </a>
            
              
              <a class="source" href="url.html">
                url.js
              </a>
            
              
              <a class="source" href="util.html">
                util.js
              </a>
            
              
              <a class="source" href="bootstrapper.html">
                bootstrapper.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>tmplUtil.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>ï»¿<span class="hljs-comment">/* global define */</span>

<span class="hljs-comment">/**
* Utility module containing useful static classes.
*
* @module Utils
*/</span>

<span class="hljs-comment">/**
* A set of functions that can be accessed within templates
*
*
* @class TmplUtil
* @static
*/</span>

define([],
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span><span class="hljs-pi">
        "use strict"</span>;

        <span class="hljs-keyword">return</span> {
            <span class="hljs-comment">/**
            * Given a feature object or a graphic object (or any object that has a getLayer method and an
            * attributes field) return the image URL for that feature/graphic object.
            *
            * NOTE: all dependent functions should be wroten as nested functions inside the caller function, otherwise TmplEx templating library won't identify
            *
            * @method getGraphicIcon
            * @param {Graphic} graphic
            * @param {Object} layerConfig
            * @return {String} imageUrl Url to the features symbology image
            */</span>
            getGraphicIcon: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphic, layerConfig)</span> {</span>
                <span class="hljs-keyword">var</span> symbolConfig = layerConfig.symbology;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>TODO expand logic.  Need to handle up to 3 keys in unique renderer.  Need to handle Ranged renderer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">switch</span> (symbolConfig.renderer.type) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"unique"</span>:
                        <span class="hljs-keyword">var</span> key = graphic.attributes[symbolConfig.renderer.key1];
                        <span class="hljs-keyword">return</span> symbolConfig.icons[key].imageUrl;

                    <span class="hljs-keyword">case</span> <span class="hljs-string">"simple"</span>:
                        <span class="hljs-keyword">return</span> symbolConfig.icons[<span class="hljs-string">"default"</span>].imageUrl;
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-keyword">return</span> symbolConfig.icons[<span class="hljs-string">"default"</span>].imageUrl;
                }
            },

            <span class="hljs-comment">/**
            * Given a feature object or a graphic object (or any object that has a getLayer method and an
            * attributes field) return the attribute value for its designaed "name" field
            *
            * NOTE: all dependent functions should be wroten as nested functions inside the caller function, otherwise TmplEx templating library won't identify
            *
            * @method getFeatureName
            * @param {Graphic} graphic
            * @param {Object} layerConfig
            * @return {String} imageUrl Url to the features symbology image
            */</span>
            getFeatureName: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphic, layerConfig)</span> {</span>
                <span class="hljs-keyword">return</span> graphic.attributes[layerConfig.nameField];
            },

            <span class="hljs-comment">/**
            * Given a feature object return the objectid for that item.
            * This will likely fail on a non-feature object (e.g. a plain graphic)
            *
            * NOTE: all dependent functions should be wroten as nested functions inside the caller function, otherwise TmplEx templating library won't identify
            *
            * @method getObjectId
            * @param {Graphic} graphic
            * @return {Integer} objectId
            */</span>
            getObjectId: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphic)</span> {</span>
                <span class="hljs-keyword">return</span> graphic.attributes[graphic.getLayer().objectIdField];
            },
            <span class="hljs-comment">/*
            * Helper function, get attribute value by field name
            *
            * @method getAttributeValueByName
            * @param {Object} graphic ?
            * @param {String} fieldName ?
            */</span>
            getAttributeValueByName: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(graphic, fieldName)</span> {</span>
                <span class="hljs-keyword">return</span> graphic.attributes[fieldName];
            },

            <span class="hljs-comment">/* Helper function used by filterManager.*/</span>
            <span class="hljs-comment">/*
            * generate visibility legend object
            * @param o
            */</span>
            generateVisibilityLegend: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(o)</span> {</span>
                <span class="hljs-keyword">var</span> attr = <span class="hljs-string">""</span>,
                    visibilityLegendLabel = {
                        <span class="hljs-keyword">for</span>: <span class="hljs-string">"filterGroup_"</span> + o.data[o.idx].id,
                        attr: attr,
                        value: o.data[o.idx].id,
                        checked: <span class="hljs-string">"checked"</span>,
                        label: o.data[o.idx].layerConfig.displayName,
                        <span class="hljs-keyword">class</span>: <span class="hljs-string">"eye checked"</span>,
                        featureId: o.data[o.idx].layerConfig.id
                    };
                <span class="hljs-keyword">return</span> visibilityLegendLabel;
            },
            <span class="hljs-comment">/*
            * generate visibility legend object
            * @param o
            */</span>
            generateBoundingBoxLegend: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(o)</span> {</span>
                <span class="hljs-keyword">var</span> attr = <span class="hljs-string">""</span>,
                    boundingLegendLabel = {
                        <span class="hljs-keyword">for</span>: <span class="hljs-string">"filterGroup_"</span> + o.data[o.idx].id + <span class="hljs-string">"1"</span>,
                        attr: attr + <span class="hljs-string">"1"</span>,
                        value: o.data[o.idx].id,
                        checked: <span class="hljs-string">"checked"</span>,
                        label: o.data[o.idx].layerConfig.displayName,
                        <span class="hljs-keyword">class</span>: <span class="hljs-string">"box checked"</span>,
                        featureId: o.data[o.idx].layerConfig.id
                    };

                <span class="hljs-keyword">return</span> boundingLegendLabel;
            },
            <span class="hljs-comment">/*
            * generate DataLayerUUID by removing layer_ from layer id
            * @param layerId
            */</span>
            getDataLayerUUID: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(layerId)</span> {</span>
                <span class="hljs-keyword">return</span> layerId.replace(<span class="hljs-string">"layer_"</span>, <span class="hljs-string">""</span>);
            }
        };
    });</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
