<!DOCTYPE html>

<html>
<head>
  <title>RAMP-starter.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="advancedToolbar.html">
                advancedToolbar.js
              </a>
            
              
              <a class="source" href="attributeLoader.html">
                attributeLoader.js
              </a>
            
              
              <a class="source" href="basemapSelector.html">
                basemapSelector.js
              </a>
            
              
              <a class="source" href="bookmarkLink.html">
                bookmarkLink.js
              </a>
            
              
              <a class="source" href="dataLoader.html">
                dataLoader.js
              </a>
            
              
              <a class="source" href="dataLoaderGui.html">
                dataLoaderGui.js
              </a>
            
              
              <a class="source" href="datagrid.html">
                datagrid.js
              </a>
            
              
              <a class="source" href="datagridClickHandler.html">
                datagridClickHandler.js
              </a>
            
              
              <a class="source" href="eventManager.html">
                eventManager.js
              </a>
            
              
              <a class="source" href="featureClickHandler.html">
                featureClickHandler.js
              </a>
            
              
              <a class="source" href="featureHighlighter.html">
                featureHighlighter.js
              </a>
            
              
              <a class="source" href="filterManager.html">
                filterManager.js
              </a>
            
              
              <a class="source" href="geoSearch.html">
                geoSearch.js
              </a>
            
              
              <a class="source" href="globalStorage.html">
                globalStorage.js
              </a>
            
              
              <a class="source" href="graphicExtension.html">
                graphicExtension.js
              </a>
            
              
              <a class="source" href="gui.html">
                gui.js
              </a>
            
              
              <a class="source" href="imageExport.html">
                imageExport.js
              </a>
            
              
              <a class="source" href="layerGroup.html">
                layerGroup.js
              </a>
            
              
              <a class="source" href="layerItem.html">
                layerItem.js
              </a>
            
              
              <a class="source" href="layerLoader.html">
                layerLoader.js
              </a>
            
              
              <a class="source" href="map.html">
                map.js
              </a>
            
              
              <a class="source" href="mapClickHandler.html">
                mapClickHandler.js
              </a>
            
              
              <a class="source" href="maptips.html">
                maptips.js
              </a>
            
              
              <a class="source" href="navigation.html">
                navigation.js
              </a>
            
              
              <a class="source" href="quickzoom.html">
                quickzoom.js
              </a>
            
              
              <a class="source" href="stepItem.html">
                stepItem.js
              </a>
            
              
              <a class="source" href="theme.html">
                theme.js
              </a>
            
              
              <a class="source" href="RAMP-starter.html">
                RAMP-starter.js
              </a>
            
              
              <a class="source" href="areaTool.html">
                areaTool.js
              </a>
            
              
              <a class="source" href="baseTool.html">
                baseTool.js
              </a>
            
              
              <a class="source" href="bufferTool.html">
                bufferTool.js
              </a>
            
              
              <a class="source" href="distanceTool.html">
                distanceTool.js
              </a>
            
              
              <a class="source" href="populationTool.html">
                populationTool.js
              </a>
            
              
              <a class="source" href="array.html">
                array.js
              </a>
            
              
              <a class="source" href="bricks.html">
                bricks.js
              </a>
            
              
              <a class="source" href="checkbox.html">
                checkbox.js
              </a>
            
              
              <a class="source" href="checkboxGroup.html">
                checkboxGroup.js
              </a>
            
              
              <a class="source" href="decorator.html">
                decorator.js
              </a>
            
              
              <a class="source" href="dictionary.html">
                dictionary.js
              </a>
            
              
              <a class="source" href="functionMangler.html">
                functionMangler.js
              </a>
            
              
              <a class="source" href="popupManager.html">
                popupManager.js
              </a>
            
              
              <a class="source" href="prototype.html">
                prototype.js
              </a>
            
              
              <a class="source" href="tmplHelper.html">
                tmplHelper.js
              </a>
            
              
              <a class="source" href="tmplUtil.html">
                tmplUtil.js
              </a>
            
              
              <a class="source" href="url.html">
                url.js
              </a>
            
              
              <a class="source" href="util.html">
                util.js
              </a>
            
              
              <a class="source" href="bootstrapper.html">
                bootstrapper.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>RAMP-starter.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>ï»¿<span class="hljs-comment">/*global location, $, document */</span>

<span class="hljs-comment">/**
*
*
* @module RAMP
*/</span>

<span class="hljs-comment">/**
* RAMPStarter class.
* Performs initial configuration of the dojo config object specifying path to the RAMP modules, detecting locale, and loading the {{#crossLink "Bootstrapper"}}{{/crossLink}} module.
* pipe the locale to dojo.
*
* @class RAMPStarter
* @static
*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>required to get draw bar to show in French</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> RAMP,
    jsFolderPath = <span class="hljs-string">"js/"</span>,
    pathname = location.pathname.replace(<span class="hljs-regexp">/\/[^/]+$/</span>, <span class="hljs-string">""</span>) + <span class="hljs-string">"/"</span>,
    jsPrefix = pathname + jsFolderPath,
    htmlNode = $(<span class="hljs-string">"html"</span>),
    dojoConfig;

<span class="hljs-comment">/**
* RAMP global class.
* A general globally available class to hold any RAMP global data. Currently houses any plugins which are not loaded via AMD.
*
* @class RAMP
*/</span>
RAMP = {
    <span class="hljs-comment">/**
     * Contains a URL that points to the application configuration (JSON format) if it's hosted on a web service.
     * This is not required if the application has a JSON config file in the website's folder
     * @property configServiceURL
     * @type String
     */</span>
    configServiceURL: <span class="hljs-string">"http://sncr01wbingsdv1.ncr.int.ec.gc.ca:8000/v1/"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>FIXME move the config service URL out of this file since it is now minified and appended to lib.js in the build</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-comment">/**
     * The RAMP application config, it should be treated as read only by all modules other than globalStorage and bootstrapper
     *
     * @property config
     * @type Object
     */</span>
    config: {},

    <span class="hljs-comment">/**
     * A registry of plugins for RAMP code to reference, these should be loaded and registered by bootstrapper.js
     *
     * @property plugins
     * @type Object
     */</span>
    plugins: {
        featureInfoParser: {},
        projectionLookup: {}
    },

    <span class="hljs-comment">/**
    * A temporary solution to state management.  Will be changed
    *
    * @property state
    * @type Object
    */</span>
    state: {
        ui: {
            sidePanelOpened: <span class="hljs-literal">true</span>,
            fullscreen: <span class="hljs-literal">false</span>,
            wmsQuery: <span class="hljs-literal">true</span>,
            datagridUpdating: <span class="hljs-number">0</span>
        },
        hilite: { <span class="hljs-comment">//tracks active hilights to allow them to refresh if feature graphics redraw at different resolution</span>
            click: {
                objId: -<span class="hljs-number">1</span>,
                layerId: <span class="hljs-string">''</span>
            },
            zoom: {
                objId: -<span class="hljs-number">1</span>,
                layerId: <span class="hljs-string">''</span>
            }
        }
    },

    <span class="hljs-comment">/**
     * Store global flags.  Should only contain boolean entries.
     *
     * @property flags
     * @type Object
     */</span>
    flags: {},

    <span class="hljs-comment">/**
     * Scripts to be loaded after dojo config is prepared.  Loaded in order (works around an IE9 issue).
     *
     * @property scripts
     * @type array
     */</span>
    scripts: [<span class="hljs-string">'http://js.arcgis.com/3.13/'</span>, jsPrefix + <span class="hljs-string">'lib/wet-boew/js/wet-boew.js'</span>, jsPrefix + <span class="hljs-string">'RAMP/bootstrapper.js'</span>],

    <span class="hljs-comment">/**
    * Store feature datasets.  Keyed by layer id, value is set of attribute data.
    *
    * @property data
    * @type Object
    */</span>
    data: {},

    <span class="hljs-comment">/**
    * Store layer object.  Keyed by layer id, value layer object.
    *
    * @property layerRegistry
    * @type Object
    */</span>
    layerRegistry: {},

    <span class="hljs-comment">/**
    * Store layer counts.  Used to accurately determine layer ordering and insertion positions in the map stack
    * default basemap count to 1, as we always load 1 to begin with.
    *
    * @property layerCounts
    * @type Object
    */</span>
    layerCounts: {
        feature: <span class="hljs-number">0</span>,
        bb: <span class="hljs-number">0</span>,
        wms: <span class="hljs-number">0</span>,
        base: <span class="hljs-number">1</span>
    }
};

<span class="hljs-keyword">var</span> importScript = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">oHead</span>) </span>{
<span class="hljs-pi">    'use strict'</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadError</span>(<span class="hljs-params">oError</span>) </span>{
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">URIError</span>(<span class="hljs-string">"The script "</span> + oError.target.src + <span class="hljs-string">" is not accessible."</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sSrc, fOnload</span>) </span>{
        <span class="hljs-keyword">var</span> oScript = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"script"</span>);
        oScript.type = <span class="hljs-string">"text\/javascript"</span>;
        oScript.onerror = loadError;
        <span class="hljs-keyword">if</span> (fOnload) { oScript.onload = fOnload; }
        oHead.appendChild(oScript);
        oScript.src = sSrc;
    };
})(<span class="hljs-built_in">document</span>.head || <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">"head"</span>)[<span class="hljs-number">0</span>]);

dojoConfig = {
    parseOnLoad: <span class="hljs-literal">false</span>,
    locale: htmlNode.attr(<span class="hljs-string">"lang"</span>),
    <span class="hljs-keyword">async</span>: <span class="hljs-literal">true</span>,
    packages: [
        {
            name: <span class="hljs-string">"ramp"</span>,
            location: jsPrefix + <span class="hljs-string">"RAMP/Modules"</span>
        },
        {
            name: <span class="hljs-string">"utils"</span>,
            location: jsPrefix + <span class="hljs-string">"RAMP/Utils"</span>
        },
        {
            name: <span class="hljs-string">"tools"</span>,
            location: jsPrefix + <span class="hljs-string">"RAMP/Tools/"</span>
        }
    ],
    fullPluginPath: jsPrefix + <span class="hljs-string">'plugins/'</span>
};

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadRampScripts</span>(<span class="hljs-params">scripts</span>) </span>{
<span class="hljs-pi">    'use strict'</span>;
    <span class="hljs-keyword">if</span> (scripts.length === <span class="hljs-number">0</span>) { <span class="hljs-keyword">return</span>; }
    importScript(scripts[<span class="hljs-number">0</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ loadRampScripts(scripts.slice(<span class="hljs-number">1</span>)); });
})(RAMP.scripts);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
